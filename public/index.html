<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tone Generator</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="aqua">
    <!-- iOS support -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <meta name="apple-mobile-web-app-status-bar" content="aqua">
    <!-- JavaScript files -->
    <script src="src/tone-generator.js"></script>
    <script src="src/log-slider.js"></script>
    <script src="src/lib/Chart.bundle.min.js"></script>
</head>
<body>
    <h2>Tone Generator</h2>
    <div>
        <label for="waveform">Waveform:</label>
        <select id="waveform" onchange="onWaveformChanged()">
            <option value="sine">Sine</option>
            <option value="pulse">Pulse</option>
            <option value="triangle">Triangle</option>
            <option value="sawtooth">Sawtooth</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <div id="expressionDiv" hidden>
        <label for="expression">Expression:</label>
        <input type="text" id="expression" size="30" value="sin(2*pi*f*t)" onchange="onExpressionChanged()">
    </div>
    <div>
        <label for="duration">Duration:</label>
        <input type="text" id="duration" value="1" onchange="onDurationChanged()">
    </div>
    <div>
        <label for="loop">Loop</label>
        <input type="checkbox" id="loop" checked onchange="onLoopChanged()">
    </div>
    <div>
        <label for="frequencySlider">Frequency</label>
        <input type="range" id="frequencySlider" max="100" value="40" oninput="onFrequencyChanged()">
        <label id="frequencyLabel"></label>
    </div>
    <div>
        <label for="amplitudeSlider">Amplitude</label>
        <input type="range" id="amplitudeSlider" min="0" max="100" value="50" oninput="onAmplitudeChanged()">
        <label id="amplitudeLabel"></label>
    </div>
    <div id="dutyCycleDiv" hidden>
        <label for="dutyCycleSlider">Duty Cycle</label>
        <input type="range" id="dutyCycleSlider" min="0" max="100" value="50" oninput="onDutyCycleChanged()">
        <label id="dutyCycleLabel"></label>
    </div>
    <br>
    <div>
        <button type="button" onclick="start()">Start</button>
        <button type="button" onclick="stop()">Stop</button>
    </div>

    <p>Recording starts automatically when you click <i>Start</i> and can be downloaded after you clicked <i>Stop</i>.<br>
    If you use Google Chrome, play it in the player below and click the three dots at the right to download it.<br>
    If you use Firefox on Desktop, right-click the player to find the <i>save as</i> option.</p>

    <audio id="record" controls></audio>

    <canvas id="chart" width="400" height="400"></canvas>
    <!-- TODO example chart, remove -->
    <script>
        var ctx = document.getElementById('chart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
                datasets: [{
                    label: '# of Votes',
                    data: [12, 19, 3, 5, 2, 3],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    </script>

    <script src="src/app.js"></script>
</body>
</html>
